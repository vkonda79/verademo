name: Veracode Upload & Scan to Verademo-Test

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  veracode-upload-and-scan:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Prepare artifacts (optional)
        # if you need to build a package (e.g. dotnet build), do it here.
        run: |
          echo "Optional build steps go here"

      - name: Upload & scan with Veracode (Upload & Scan Java wrapper)
        uses: veracode/veracode-uploadandscan-action@v1
        with:
          appname: "Verademo-Test"         # the application name in Veracode
          createprofile: false             # set false because you already created the app
          filepath: "./"                   # path to upload (root of repo)
          version: "${{ github.run_id }}"  # useful to differentiate uploads
          vid: ${{ secrets.VERACODE_API_ID }}
          vkey: ${{ secrets.VERACODE_API_SECRET }}



